package com.mobiliya.edvelop.test;

import org.openqa.selenium.support.ui.ExpectedConditions;
import org.testng.Assert;
import org.testng.annotations.Test;

import com.mobiliya.common.pageObjects.GoogleWebViewSignInPage;
import com.mobiliya.common.pageObjects.KeywordsCommon;
import com.mobiliya.edvelop.AppConstants;
import com.mobiliya.edvelop.pageObjects.BackToLoginPage;
import com.mobiliya.edvelop.pageObjects.IntroScreensPage;
import com.mobiliya.edvelop.pageObjects.LoginPage;

public class TestInvalidLoginWithGoogle extends BaseTest {
	@Test(dependsOnMethods = { "testDisplayIntroScreensOnFirstLaunch" }, dataProvider = "testDataInvalidLogin")
	public void testInvalidLoginWithGoogle(String username, String password) {
		IntroScreensPage introPage = new IntroScreensPage();
		LoginPage loginPage = new LoginPage();
		BackToLoginPage backToLoginPage = new BackToLoginPage();
		GoogleWebViewSignInPage signInPage = new GoogleWebViewSignInPage();
		introPage.clickGetStartedButton();
		loginPage.clickSignInWithGoogleButton();
		KeywordsCommon.contextSwitchNativeToWeb();
		signInPage.performGmailSignIn(username, password);
		KeywordsCommon.contextSwitchWebToNative();
		wait.until(ExpectedConditions.visibilityOf(backToLoginPage.static_text_err_msg));
		String actual = backToLoginPage.getTextErrMsgInvalidLogin();
		String expected = AppConstants.BACK_TO_LOGIN_PAGE_EXPECTED_INVALID_LOGIN_ERR_MSG;
		Assert.assertEquals(actual, expected);
	}

}
